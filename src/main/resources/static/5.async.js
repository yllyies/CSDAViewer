(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"6jZO":function(e,a,t){e.exports={stage:"antd-pro\\pages\\-logo\\index-stage",layer:"antd-pro\\pages\\-logo\\index-layer",roll:"antd-pro\\pages\\-logo\\index-roll"}},JAxp:function(e,a,t){e.exports={login:"antd-pro\\components\\-login\\index-login",tabs:"antd-pro\\components\\-login\\index-tabs",prefixIcon:"antd-pro\\components\\-login\\index-prefixIcon",getCaptcha:"antd-pro\\components\\-login\\index-getCaptcha",submit:"antd-pro\\components\\-login\\index-submit"}},Y5yc:function(e,a,t){"use strict";t.r(a);t("fOrg");var r=t("+KLJ"),s=t("p0pE"),n=t.n(s),l=t("q1tI"),i=t.n(l),o=t("MuoO"),c=(t("y8nQ"),t("Vl3Y")),p=(t("Znn+"),t("ZTPi")),m=t("TSYQ"),u=t.n(m),h=(t("14J3"),t("BMrR")),d=(t("+L6B"),t("2/Rp")),g=(t("jCWc"),t("kPKH")),v=(t("5NDa"),t("5rEg")),b=t("jehZ"),y=t.n(b),E=t("Y/ft"),f=t.n(E),C=t("BGR+"),N=t("JAxp"),x=t.n(N),w=(t("Pwec"),t("CtXQ")),S={UserName:{props:{size:"large",prefix:i.a.createElement(w["a"],{type:"user",className:x.a.prefixIcon}),placeholder:"admin"},rules:[{required:!0,message:"Please enter username!"}]},Password:{props:{size:"large",prefix:i.a.createElement(w["a"],{type:"lock",className:x.a.prefixIcon}),type:"password",placeholder:"888888"},rules:[{required:!0,message:"Please enter password!"}]},Mobile:{props:{size:"large",prefix:i.a.createElement(w["a"],{type:"mobile",className:x.a.prefixIcon}),placeholder:"mobile number"},rules:[{required:!0,message:"Please enter mobile number!"},{pattern:/^1\d{10}$/,message:"Wrong mobile number format!"}]},Captcha:{props:{size:"large",prefix:i.a.createElement(w["a"],{type:"mail",className:x.a.prefixIcon}),placeholder:"captcha"},rules:[{required:!0,message:"Please enter Captcha!"}]}},T=Object(l["createContext"])(),I=T,P=c["a"].Item;class A extends l["Component"]{constructor(e){super(e),this.onGetCaptcha=(()=>{var e=this.props.onGetCaptcha,a=e?e():null;!1!==a&&(a instanceof Promise?a.then(this.runGetCaptchaCountDown):this.runGetCaptchaCountDown())}),this.getFormItemOptions=(e=>{var a=e.onChange,t=e.defaultValue,r=e.rules,s={rules:r||this.customprops.rules};return a&&(s.onChange=a),t&&(s.initialValue=t),s}),this.runGetCaptchaCountDown=(()=>{var e=this.props.countDown,a=e||59;this.setState({count:a}),this.interval=setInterval(()=>{a-=1,this.setState({count:a}),0===a&&clearInterval(this.interval)},1e3)}),this.state={count:0}}componentDidMount(){var e=this.props,a=e.updateActive,t=e.name;a&&a(t)}componentWillUnmount(){clearInterval(this.interval)}render(){var e=this.state.count,a=this.props.form.getFieldDecorator,t=this.props,r=(t.onChange,t.customprops),s=(t.defaultValue,t.rules,t.name),n=t.buttonText,l=(t.updateActive,t.type),o=f()(t,["onChange","customprops","defaultValue","rules","name","buttonText","updateActive","type"]),c=this.getFormItemOptions(this.props),p=o||{};if("Captcha"===l){var m=Object(C["a"])(p,["onGetCaptcha"]);return i.a.createElement(P,null,i.a.createElement(h["a"],{gutter:8},i.a.createElement(g["a"],{span:16},a(s,c)(i.a.createElement(v["a"],y()({},r,m)))),i.a.createElement(g["a"],{span:8},i.a.createElement(d["a"],{disabled:e,className:x.a.getCaptcha,size:"large",onClick:this.onGetCaptcha},e?"".concat(e," s"):n))))}return i.a.createElement(P,null,a(s,c)(i.a.createElement(v["a"],y()({},r,p))))}}var O={};Object.keys(S).forEach(e=>{var a=S[e];O[e]=(t=>i.a.createElement(I.Consumer,null,r=>i.a.createElement(A,y()({customprops:a.props},t,{rules:a.rules,type:e,updateActive:r.updateActive,form:r.form}))))});var F=O,j=p["a"].TabPane,q=(()=>{var e=0;return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e+=1,"".concat(a).concat(e)}})();class D extends l["Component"]{constructor(e){super(e),this.uniqueId=q("login-tab-")}componentDidMount(){var e=this.props.tabUtil;e.addTab(this.uniqueId)}render(){var e=this.props.children;return i.a.createElement(j,this.props,e)}}var G=e=>i.a.createElement(I.Consumer,null,a=>i.a.createElement(D,y()({tabUtil:a.tabUtil},e)));G.typeName="LoginTab";var k=G,L=c["a"].Item,M=e=>{var a=e.className,t=f()(e,["className"]),r=u()(x.a.submit,a);return i.a.createElement(L,null,i.a.createElement(d["a"],y()({size:"large",className:r,type:"primary",htmlType:"submit"},t)))},U=M;class z extends l["Component"]{constructor(e){super(e),this.onSwitch=(e=>{this.setState({type:e});var a=this.props.onTabChange;a(e)}),this.getContext=(()=>{var e=this.state.tabs,a=this.props.form;return{tabUtil:{addTab:a=>{this.setState({tabs:[...e,a]})},removeTab:a=>{this.setState({tabs:e.filter(e=>e!==a)})}},form:a,updateActive:e=>{var a=this.state,t=a.type,r=a.active;r[t]?r[t].push(e):r[t]=[e],this.setState({active:r})}}}),this.handleSubmit=(e=>{e.preventDefault();var a=this.state,t=a.active,r=a.type,s=this.props,n=s.form,l=s.onSubmit,i=t[r];n.validateFields(i,{force:!0},(e,a)=>{l(e,a)})}),this.state={type:e.defaultActiveKey,tabs:[],active:{}}}render(){var e=this.props,a=e.className,t=e.children,r=this.state,s=r.type,n=r.tabs,l=[],o=[];return i.a.Children.forEach(t,e=>{e&&("LoginTab"===e.type.typeName?l.push(e):o.push(e))}),i.a.createElement(I.Provider,{value:this.getContext()},i.a.createElement("div",{className:u()(a,x.a.login)},i.a.createElement(c["a"],{onSubmit:this.handleSubmit},n.length?i.a.createElement(i.a.Fragment,null,i.a.createElement(p["a"],{animated:!1,className:x.a.tabs,activeKey:s,onChange:this.onSwitch},l),o):[...t])))}}z.defaultProps={className:"",defaultActiveKey:"",onTabChange:()=>{},onSubmit:()=>{}},z.Tab=k,z.Submit=U,Object.keys(F).forEach(e=>{z[e]=F[e]});var J,K,V=c["a"].create()(z),Z=t("w2qy"),B=t.n(Z),Y=t("6jZO"),Q=t.n(Y);class R extends l["PureComponent"]{render(){return i.a.createElement("div",{className:Q.a.stage},i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}),i.a.createElement("div",{className:Q.a.layer}))}}t.d(a,"default",function(){return $});V.Tab;var W=V.UserName,H=V.Password,X=(V.Mobile,V.Captcha,V.Submit),$=(J=Object(o["connect"])(e=>{var a=e.login,t=e.loading;return{login:a,submitting:t.effects["login/login"]}}),J(K=class extends l["Component"]{constructor(){super(...arguments),this.state={type:"account",autoLogin:!0},this.onTabChange=(e=>{this.setState({type:e})}),this.onGetCaptcha=(()=>new Promise((e,a)=>{this.loginForm.validateFields(["mobile"],{},(t,r)=>{if(t)a(t);else{var s=this.props.dispatch;s({type:"login/getCaptcha",payload:r.mobile}).then(e).catch(a)}})})),this.handleSubmit=((e,a)=>{var t=this.state.type;if(!e){var r=this.props.dispatch;r({type:"login/login",payload:n()({},a,{type:t})})}}),this.changeAutoLogin=(e=>{this.setState({autoLogin:e.target.checked})}),this.renderMessage=(e=>i.a.createElement(r["a"],{style:{marginBottom:24},message:e,type:"error",showIcon:!0}))}render(){var e=this.props,a=e.login,t=e.submitting,r=this.state,s=r.type;r.autoLogin;return i.a.createElement("div",{className:B.a.main},i.a.createElement(R,null),i.a.createElement(V,{defaultActiveKey:s,onTabChange:this.onTabChange,onSubmit:this.handleSubmit,ref:e=>{this.loginForm=e}},"error"===a.status&&"account"===a.type&&!t&&this.renderMessage("\u8d26\u6237\u6216\u5bc6\u7801\u9519\u8bef"),i.a.createElement(W,{name:"name",placeholder:"agilent"}),i.a.createElement(H,{name:"password",placeholder:"password",onPressEnter:()=>this.loginForm.validateFields(this.handleSubmit)}),i.a.createElement(X,{loading:t},"\u767b\u5f55")))}})||K)},w2qy:function(e,a,t){e.exports={main:"antd-pro\\pages\\-user\\-login-main",icon:"antd-pro\\pages\\-user\\-login-icon",other:"antd-pro\\pages\\-user\\-login-other",register:"antd-pro\\pages\\-user\\-login-register"}}}]);